<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Ammoue | Login & Sign Up</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  Â  Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
Â  Â  <script src="https://unpkg.com/lucide@latest"></script>
Â  Â  <style>
Â  Â  Â  Â  /* Custom Font Setup */
Â  Â  Â  Â  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif;
Â  Â  Â  Â  Â  Â  /* Soft transition for fade-out animation */
Â  Â  Â  Â  Â  Â  transition: opacity 0.4s ease-out; 
Â  Â  Â  Â  }
Â  Â  Â  Â  .text-ammoue {
Â  Â  Â  Â  Â  Â  color: #0d9488; /* Teal-700 for Ammoue branding */
Â  Â  Â  Â  }
Â  Â  Â  Â  .bg-ammoue {
Â  Â  Â  Â  Â  Â  background-color: #0d9488; /* Teal-700 for Ammoue branding */
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Custom styles for message box */
Â  Â  Â  Â  #message-box {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 20px;
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  transform: translateX(-50%);
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transition: opacity 0.3s ease-in-out;
Â  Â  Â  Â  Â  Â  max-width: 90%; /* Ensure it fits on smaller screens */
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- TESTIMONIAL STYLES & ANIMATION --- */

Â  Â  Â  Â  /* Hides the testimonial columns on smaller screens */
Â  Â  Â  Â  .testimonial-col {
Â  Â  Â  Â  Â  Â  display: none;Â 
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Shows testimonial columns on large screens (Tailwind's 'lg' breakpoint) */
Â  Â  Â  Â  @media (min-width: 1024px) {
Â  Â  Â  Â  Â  Â  .testimonial-col {
Â  Â  Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  Â  Â  height: 90vh; /* Set a fixed viewport height for the scrolling area */
Â  Â  Â  Â  Â  Â  Â  Â  width: 250px; /* Fixed width for the columns */
Â  Â  Â  Â  Â  Â  Â  Â  mask-image: linear-gradient(to top, transparent, black 15%, black 85%, transparent); /* Fade effect at top/bottom */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Keyframe animation for scrolling */
Â  Â  Â  Â  @keyframes scroll-up {
Â  Â  Â  Â  Â  Â  to {
Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(-50%); /* Scroll up by exactly half (to create the loop) */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes scroll-down {
Â  Â  Â  Â  Â  Â  to {
Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(0%); /* Scroll down by exactly half (to create the loop) */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Class for the container holding the duplicated reviews */
Â  Â  Â  Â  .reviews-container {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  gap: 1.5rem; /* Gap between reviews */
Â  Â  Â  Â  Â  Â  padding: 1.5rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Apply the animation */
Â  Â  Â  Â  #left-reviews {
Â  Â  Â  Â  Â  Â  animation: scroll-up 60s linear infinite; /* Left moves up */
Â  Â  Â  Â  }
Â  Â  Â  Â  #right-reviews {
Â  Â  Â  Â  Â  Â  /* To create the loop, we effectively scroll from -50% to 0% and repeat */
Â  Â  Â  Â  Â  Â  animation: scroll-down 60s linear infinite; /* Right moves down */
Â  Â  Â  Â  Â  Â  transform: translateY(-50%); /* Start at the bottom half */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Stop animation on hover */
Â  Â  Â  Â  .testimonial-col:hover .reviews-container {
Â  Â  Â  Â  Â  Â  animation-play-state: paused;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body class="antialiased min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-white to-gray-100 dark:from-gray-900 dark:to-gray-950">

Â  Â  <div id="message-box" class="p-4 rounded-xl shadow-2xl text-white font-semibold"></div>

Â  Â  <div class="flex justify-center items-center w-full lg:max-w-6xl animate__animated animate__fadeInUp animate__faster">

Â  Â  Â  Â  <div class="testimonial-col mr-8">
Â  Â  Â  Â  Â  Â  <div id="left-reviews" class="reviews-container">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="w-full max-w-md bg-white rounded-3xl shadow-2xl p-8 sm:p-10 border border-gray-100">

Â  Â  Â  Â  Â  Â  <a href="index.html" class="flex flex-col items-center mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-4xl font-extrabold text-ammoue">Ammoue</span>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-500 mt-1">AI Website Builder</p>
Â  Â  Â  Â  Â  Â  </a>

Â  Â  Â  Â  Â  Â  <div class="flex mb-6 p-1 bg-gray-100 rounded-xl shadow-inner">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="login-tab" onclick="toggleForm('login')" type="button" class="flex-1 py-2 text-sm font-semibold rounded-lg transition-colors duration-200">Log In</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="signup-tab" onclick="toggleForm('signup')" type="button" class="flex-1 py-2 text-sm font-semibold rounded-lg transition-colors duration-200">Sign Up</button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <form id="login-form" class="space-y-6" onsubmit="handleLogin(event)">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-gray-800 text-center mb-4">Welcome Back</h2>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p id="form-error" class="text-sm text-red-600 font-medium hidden"></p>

Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="login-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="login-email" **autofocus** required class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-ammoue focus:border-ammoue transition duration-150" placeholder="you@example.com">
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="relative">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="login-password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="login-password" required class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-ammoue focus:border-ammoue transition duration-150" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="password-toggle" onclick="togglePasswordVisibility('login-password', this)" class="absolute inset-y-0 right-0 top-6 pr-3 flex items-center text-gray-500 hover:text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg id="eye-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#" onclick="handleForgotPassword(event)" class="font-medium text-ammoue hover:text-teal-600">Forgot Password?</a>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" id="login-btn" class="w-full py-3 text-lg font-bold rounded-xl text-white bg-ammoue hover:bg-teal-800 active:scale-95 transition duration-300 shadow-lg shadow-teal-500/30">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Log In
Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="relative pt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="absolute inset-0 flex items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-full border-t border-gray-300"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="relative flex justify-center text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 bg-white text-gray-500">Or continue with</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <button type="button"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id="google-login-btn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onclick="handleGoogleAuth(this)"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="w-full flex items-center justify-center py-2.5 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition duration-150">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://upload.wikimedia.org/wikipedia/commons/4/4a/Logo_and_wordmark_of_Google.svg" class="w-5 h-5 mr-2" alt="Google logo">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Sign in with Google
Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  <button type="button"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id="github-login-btn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onclick="handleGitHubAuth(this)"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="w-full flex items-center justify-center py-2.5 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition duration-150">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://github.githubassets.com/assets/GitHub-Mark-ea2971cee799.png" class="w-5 h-5 mr-2" alt="GitHub logo">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Sign in with GitHub
Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  <form id="signup-form" class="space-y-6 hidden" onsubmit="handleSignup(event)">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-gray-800 text-center mb-4">Create Your Free Account</h2>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p id="signup-form-error" class="text-sm text-red-600 font-medium hidden"></p>

Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="signup-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="signup-email" required class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-ammoue focus:border-ammoue transition duration-150" placeholder="you@example.com">
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="relative">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="signup-password" class="block text-sm font-medium text-gray-700 mb-1">Create Password</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="signup-password" required class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-ammoue focus:border-ammoue transition duration-150" placeholder="Min. 8 characters">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="togglePasswordVisibility('signup-password', this)" class="absolute inset-y-0 right-0 top-6 pr-3 flex items-center text-gray-500 hover:text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>


Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="agree-terms" type="checkbox" required class="h-4 w-4 text-ammoue border-gray-300 rounded focus:ring-ammoue">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="agree-terms" class="ml-2 block text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  I agree to the <a href="#" class="font-medium text-ammoue hover:text-teal-600">Terms</a> and <a href="#" class="font-medium text-ammoue hover:text-teal-600">Privacy Policy</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" id="signup-btn" class="w-full py-3 text-lg font-bold rounded-xl text-white bg-ammoue hover:bg-teal-800 active:scale-95 transition duration-300 shadow-lg shadow-teal-500/30">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Sign Up & Generate Site
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="relative pt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="absolute inset-0 flex items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-full border-t border-gray-300"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="relative flex justify-center text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 bg-white text-gray-500">Or quickly sign up with</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <button type="button"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id="google-signup-btn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onclick="handleGoogleAuth(this)"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="w-full flex items-center justify-center py-2.5 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition duration-150">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://upload.wikimedia.org/wikipedia/commons/4/4a/Logo_and_wordmark_of_Google.svg" class="w-5 h-5 mr-2" alt="Google logo">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Sign up with Google
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id="github-signup-btn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onclick="handleGitHubAuth(this)"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="w-full flex items-center justify-center py-2.5 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition duration-150">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://github.githubassets.com/assets/GitHub-Mark-ea2971cee799.png" class="w-5 h-5 mr-2" alt="GitHub logo">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Sign up with GitHub
Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="testimonial-col ml-8">
Â  Â  Â  Â  Â  Â  <div id="right-reviews" class="reviews-container">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  </div> 
Â  Â  
Â  Â  <script type="module">
Â  Â  Â  Â  // --- TESTIMONIAL DATA & LOGIC ---

Â  Â  Â  Â  const reviewsData = [
Â  Â  Â  Â  Â  Â  { name: "Sarah K.", rating: 5, text: "Built my entire portfolio in an hour. Absolutely incredible speed and quality!", avatar: "https://i.pravatar.cc/150?img=1" },
Â  Â  Â  Â  Â  Â  { name: "Jake D.", rating: 5, text: "The AI suggestions are spot-on. My e-commerce site traffic doubled after the redesign.", avatar: "https://i.pravatar.cc/150?img=2" },
Â  Â  Â  Â  Â  Â  { name: "Aisha M.", rating: 4, text: "Great value for money. Minor tweaks needed, but the foundation was perfect.", avatar: "https://i.pravatar.cc/150?img=3" },
Â  Â  Â  Â  Â  Â  { name: "Chris T.", rating: 5, text: "Finally, a site builder that understands design! Highly recommend Ammoue.", avatar: "https://i.pravatar.cc/150?img=4" },
Â  Â  Â  Â  Â  Â  { name: "Maria L.", rating: 5, text: "Switched from a competitor and haven't looked back. The interface is flawless.", avatar: "https://i.pravatar.cc/150?img=5" },
Â  Â  Â  Â  Â  Â  { name: "David B.", rating: 4, text: "A powerful tool for non-coders. Made my small business look professional overnight.", avatar: "https://i.pravatar.cc/150?img=6" },
Â  Â  Â  Â  ];

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Creates the HTML for a single review card.
Â  Â  Â  Â  Â * @param {object} review - The review data object.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function createReviewCard(review) {
Â  Â  Â  Â  Â  Â  const stars = 'â˜…'.repeat(review.rating) + 'â˜†'.repeat(5 - review.rating);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Randomly flip the text and image for variation
Â  Â  Â  Â  Â  Â  const flip = Math.random() < 0.5;

Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="p-4 bg-white rounded-xl shadow-lg border border-gray-100 max-w-xs transition-transform duration-300 hover:scale-[1.02]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex ${flip ? 'flex-row-reverse' : 'flex-row'} items-center ${flip ? 'justify-between' : 'space-x-3'} mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img class="w-8 h-8 rounded-full object-cover" src="${review.avatar}" alt="${review.name}'s avatar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex flex-col ${flip ? 'text-right' : 'text-left'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs font-bold text-gray-800">${review.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-yellow-500">${stars}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-600 italic leading-snug">"${review.text}"</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Populates the review containers and duplicates the content for seamless looping.
Â  Â  Â  Â  Â * @param {string} containerId - The ID of the reviews container ('left-reviews' or 'right-reviews').
Â  Â  Â  Â  Â * @param {Array} data - The array of review data.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function populateReviews(containerId, data) {
Â  Â  Â  Â  Â  Â  const container = document.getElementById(containerId);
Â  Â  Â  Â  Â  Â  if (!container) return;

Â  Â  Â  Â  Â  Â  // Generate HTML for all reviews
Â  Â  Â  Â  Â  Â  const reviewsHtml = data.map(createReviewCard).join('');

Â  Â  Â  Â  Â  Â  // To make the seamless loop work, the content must be duplicated!
Â  Â  Â  Â  Â  Â  // The container's height must be 200% of the viewport and it scrolls to 50%
Â  Â  Â  Â  Â  Â  container.innerHTML = reviewsHtml + reviewsHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Run Testimonial Setup ---
Â  Â  Â  Â  // For the right column, we can reverse the array to make the scrolling content different
Â  Â  Â  Â  populateReviews('left-reviews', reviewsData);
Â  Â  Â  Â  populateReviews('right-reviews', [...reviewsData].reverse());Â 


Â  Â  Â  Â  // ----------------------------------------------------------------------------------
Â  Â  Â  Â  // --- START OF FIREBASE LOGIC (NO CHANGES APPLIED TO THE CORE AUTHENTICATION CODE) ---
Â  Â  Â  Â  // ----------------------------------------------------------------------------------

Â  Â  Â  Â  // Updated Imports to Firebase SDK v12.4.0
Â  Â  Â  Â  import {Â 
Â  Â  Â  Â  Â  Â  initializeAppÂ 
Â  Â  Â  Â  } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
Â  Â  Â  Â  import {Â 
Â  Â  Â  Â  Â  Â  getAuth,Â 
Â  Â  Â  Â  Â  Â  signInWithEmailAndPassword,Â 
Â  Â  Â  Â  Â  Â  createUserWithEmailAndPassword,Â 
Â  Â  Â  Â  Â  Â  onAuthStateChanged,
Â  Â  Â  Â  Â  Â  signInWithPopup,
Â  Â  Â  Â  Â  Â  GoogleAuthProvider,
Â  Â  Â  Â  Â  Â  GithubAuthProvider,Â 
Â  Â  Â  Â  Â  Â  sendPasswordResetEmail, // NEW: For Forgot Password
Â  Â  Â  Â  Â  Â  // ğŸš¨ We need this import to handle the error, even if we don't call it yet!
Â  Â  Â  Â  Â  Â  linkWithCredentialÂ 
Â  Â  Â  Â  } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
Â  Â  Â  Â  import { getFirestore, setLogLevel } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

Â  Â  Â  Â  // --- FIREBASE CONFIGURATION (Hardcoded with user's data) ---
Â  Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  Â  Â  apiKey: "AIzaSyAmnZ69YDcEFcmuXIhmGxDUSPULxpI-Bmg",
Â  Â  Â  Â  Â  Â  authDomain: "ammoueai.firebaseapp.com",
Â  Â  Â  Â  Â  Â  projectId: "ammoueai",
Â  Â  Â  Â  Â  Â  storageBucket: "ammoueai.firebasestorage.app",
Â  Â  Â  Â  Â  Â  messagingSenderId: "135818868149",
Â  Â  Â  Â  Â  Â  appId: "1:135818868149:web:db9280baf9540a3339d5fc",
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  let auth = null;Â 
Â  Â  Â  Â  let db = null;Â 

Â  Â  Â  Â  // ğŸ’¡ GLOBAL VARIABLES TO STORE CONFLICT DATA
Â  Â  Â  Â  window.pendingCredential = null;
Â  Â  Â  Â  window.conflictingEmail = null;

Â  Â  Â  Â  // --- Providers ---
Â  Â  Â  Â  const googleProvider = new GoogleAuthProvider();
Â  Â  Â  Â  const githubProvider = new GithubAuthProvider();

Â  Â  Â  Â  // --- DOM Elements ---
Â  Â  Â  Â  const loginForm = document.getElementById('login-form');
Â  Â  Â  Â  const signupForm = document.getElementById('signup-form');
Â  Â  Â  Â  const loginTab = document.getElementById('login-tab');
Â  Â  Â  Â  const signupTab = document.getElementById('signup-tab');
Â  Â  Â  Â  const loginBtn = document.getElementById('login-btn');
Â  Â  Â  Â  const signupBtn = document.getElementById('signup-btn');
Â  Â  Â  Â  const formErrorDisplay = document.getElementById('form-error'); // NEW
Â  Â  Â  Â  const signupFormErrorDisplay = document.getElementById('signup-form-error'); // NEW

Â  Â  Â  Â  // --- Utility Functions (Updated to include error display and redirect animation) ---

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Displays a temporary, custom message box (top banner).
Â  Â  Â  Â  Â * @param {string} message - The message to display.
Â  Â  Â  Â  Â * @param {boolean} isError - True for error (red), false for success (green).
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function showMessage(message, isError) {
Â  Â  Â  Â  Â  Â  const msgBox = document.getElementById('message-box');
Â  Â  Â  Â  Â  Â  msgBox.textContent = message;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (isError) {
Â  Â  Â  Â  Â  Â  Â  Â  msgBox.classList.remove('bg-green-500');
Â  Â  Â  Â  Â  Â  Â  Â  msgBox.classList.add('bg-red-500');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  msgBox.classList.remove('bg-red-500');
Â  Â  Â  Â  Â  Â  Â  Â  msgBox.classList.add('bg-green-500');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  msgBox.classList.remove('opacity-0');
Â  Â  Â  Â  Â  Â  msgBox.classList.add('opacity-100');

Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  msgBox.classList.remove('opacity-100');
Â  Â  Â  Â  Â  Â  Â  Â  msgBox.classList.add('opacity-0');
Â  Â  Â  Â  Â  Â  }, 4000);
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Displays an inline error message within the form.
Â  Â  Â  Â  Â * @param {string} message - The error message.
Â  Â  Â  Â  Â * @param {string} formId - 'login' or 'signup'.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function showInlineError(message, formId = 'login') {
Â  Â  Â  Â  Â  Â  const display = formId === 'login' ? formErrorDisplay : signupFormErrorDisplay;
Â  Â  Â  Â  Â  Â  display.textContent = message;
Â  Â  Â  Â  Â  Â  display.classList.remove('hidden');
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Clears the inline error message.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function clearInlineError() {
Â  Â  Â  Â  Â  Â  formErrorDisplay.classList.add('hidden');
Â  Â  Â  Â  Â  Â  signupFormErrorDisplay.classList.add('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Toggles loading state on buttons.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function setLoading(button, isLoading) {
Â  Â  Â  Â  Â  Â  // Hide inline errors when starting auth process
Â  Â  Â  Â  Â  Â  if (isLoading) {
Â  Â  Â  Â  Â  Â  Â  Â  clearInlineError();
Â  Â  Â  Â  Â  Â  Â  Â  button.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  button.setAttribute('data-original-text', button.innerHTML); // Save original content
Â  Â  Â  Â  Â  Â  Â  Â  button.innerHTML = '<svg class="animate-spin h-5 w-5 mr-3 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Authenticating...';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // For social buttons, change background to reflect loading state
Â  Â  Â  Â  Â  Â  Â  Â  if (button.id.includes('google') || button.id.includes('github')) {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.add('bg-gray-100', 'text-gray-400');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.remove('hover:bg-gray-50');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.add('bg-teal-700');
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  button.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  // Restore original content
Â  Â  Â  Â  Â  Â  Â  Â  if (button.getAttribute('data-original-text')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.innerHTML = button.getAttribute('data-original-text');
Â  Â  Â  Â  Â  Â  Â  Â  } else if (button.id === 'login-btn') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.textContent = 'Log In';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (button.id === 'signup-btn') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.textContent = 'Sign Up & Generate Site';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Restore social button styling
Â  Â  Â  Â  Â  Â  Â  Â  if (button.id.includes('google') || button.id.includes('github')) {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.remove('bg-gray-100', 'text-gray-400');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.add('hover:bg-gray-50');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Extracts the redirect path from the URL query parameters.
Â  Â  Â  Â  Â * Defaults to 'dashboard.html' if no 'redirect' parameter is found.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function getRedirectPath() {
Â  Â  Â  Â  Â  Â  const params = new URLSearchParams(window.location.search);
Â  Â  Â  Â  Â  Â  const redirectPath = params.get('redirect') ? decodeURIComponent(params.get('redirect')) : 'dashboard.html';
Â  Â  Â  Â  Â  Â  return redirectPath.startsWith('/') ? redirectPath.substring(1) : redirectPath;
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Redirects the user to the path specified in the 'redirect' URL parameter,Â 
Â  Â  Â  Â  Â * or to 'dashboard.html' by default, after a smooth fade-out.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function redirectToNextPage() {
Â  Â  Â  Â  Â  Â  // 5. Smooth Redirect Animation: Fade out the body
Â  Â  Â  Â  Â  Â  document.body.classList.add('opacity-0');

Â  Â  Â  Â  Â  Â  const path = getRedirectPath();
Â  Â  Â  Â  Â  Â  // Redirect after the transition time (400ms)
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = path;
Â  Â  Â  Â  Â  Â  }, 400); 
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- Firebase Core Logic ---

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Initializes Firebase services (Auth and Firestore) using the hardcoded config.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  async function initializeAppAndAuth() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // setLogLevel('debug'); // Uncomment for debugging
Â  Â  Â  Â  Â  Â  Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  Â  Â  Â  Â  Â  Â  auth = getAuth(app);Â 
Â  Â  Â  Â  Â  Â  Â  Â  db = getFirestore(app);

Â  Â  Â  Â  Â  Â  Â  Â  // If a user is already logged in (from a previous session), redirect to their intended destination.
Â  Â  Â  Â  Â  Â  Â  Â  onAuthStateChanged(auth, (user) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Redirect using the smooth animation
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`Welcome back, ${user.email || 'User'}! Redirecting...`, false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(redirectToNextPage, 50);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  // If initialization fails, catch the error, log it, and set auth/db to null.
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Firebase initialization failed:", error);
Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`Firebase initialization failed. Check your console for details.`, true);
Â  Â  Â  Â  Â  Â  Â  Â  auth = null; // Crucial: ensure subsequent calls fail gracefully
Â  Â  Â  Â  Â  Â  Â  Â  db = null;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }


Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Handles user login with email and password.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  window.handleLogin = async function(event) {
Â  Â  Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  Â  Â  clearInlineError();

Â  Â  Â  Â  Â  Â  // CRITICAL CHECK: Prevent TypeError if auth failed to initialize
Â  Â  Â  Â  Â  Â  if (!auth) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Authentication service failed to load. Please try refreshing the page.", true);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const email = document.getElementById('login-email').value;
Â  Â  Â  Â  Â  Â  const password = document.getElementById('login-password').value;

Â  Â  Â  Â  Â  Â  // 1. Form Validation Check
Â  Â  Â  Â  Â  Â  if (!email || !password) {
Â  Â  Â  Â  Â  Â  Â  Â  showInlineError("Please fill in both fields.");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  setLoading(loginBtn, true);

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // Sign in with Firebase Auth
Â  Â  Â  Â  Â  Â  Â  Â  await signInWithEmailAndPassword(auth, email, password);
Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Login successful! Redirecting...", false);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Redirect on success with animation
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(redirectToNextPage, 1000);

Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Login failed:", error);
Â  Â  Â  Â  Â  Â  Â  Â  let errorMessage = 'Login failed. Please check your email and password.';
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // 2. Display Firebase Error Messages inline
Â  Â  Â  Â  Â  Â  Â  Â  if (error.code === 'auth/user-not-found') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = 'No account found with this email.';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = 'Invalid credentials. Please check your email and password.';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (error.code === 'auth/popup-closed-by-user') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = "Sign-in cancelled. Pop-up was closed.";
Â  Â  Â  Â  Â  Â  Â  Â  } else if (error.code === 'auth/account-exists-with-different-credential') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = `âš ï¸ Account Conflict! This email is registered using a social provider (Google/GitHub). Please use the social login button.`;
Â  Â  Â  Â  Â  Â  Â  Â  } else if (error.code === 'auth/too-many-requests') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = "Access blocked due to too many failed login attempts. Try again later.";
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  showInlineError(errorMessage);
Â  Â  Â  Â  Â  Â  Â  Â  setLoading(loginBtn, false);

Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Handles user sign-up with email and password.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  window.handleSignup = async function(event) {
Â  Â  Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  Â  Â  clearInlineError();

Â  Â  Â  Â  Â  Â  // CRITICAL CHECK: Prevent TypeError if auth failed to initialize
Â  Â  Â  Â  Â  Â  if (!auth) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Authentication service failed to load. Please try refreshing the page.", true);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setLoading(signupBtn, true);

Â  Â  Â  Â  Â  Â  const email = document.getElementById('signup-email').value;
Â  Â  Â  Â  Â  Â  const password = document.getElementById('signup-password').value;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // Create user with Firebase Auth
Â  Â  Â  Â  Â  Â  Â  Â  await createUserWithEmailAndPassword(auth, email, password);
Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Account created successfully! Redirecting to the site builder...", false);

Â  Â  Â  Â  Â  Â  Â  Â  // Redirect on success with animation
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(redirectToNextPage, 1000);

Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Sign-up failed:", error);
Â  Â  Â  Â  Â  Â  Â  Â  let errorMessage = 'Sign-up failed.';
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // 2. Display Firebase Error Messages inline
Â  Â  Â  Â  Â  Â  Â  Â  if (error.code === 'auth/email-already-in-use') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = 'This email is already in use. Please log in instead.';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (error.code === 'auth/weak-password') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = 'Password should be at least 6 characters.';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  showInlineError(errorMessage, 'signup');
Â  Â  Â  Â  Â  Â  Â  Â  setLoading(signupBtn, false);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- UPDATED GOOGLE AUTH LOGIC (Handles GitHub-first conflicts) ---
Â  Â  Â  Â  window.handleGoogleAuth = async function(button) {
Â  Â  Â  Â  Â  Â  if (!auth) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Authentication service failed to load.", true);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  clearInlineError();
Â  Â  Â  Â  Â  Â  setLoading(button, true);
Â  Â  Â  Â  Â  Â  window.pendingCredential = null;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Redirecting to Google for sign-in...", false);
Â  Â  Â  Â  Â  Â  Â  Â  const result = await signInWithPopup(auth, googleProvider);
Â  Â  Â  Â  Â  Â  Â  Â  const user = result.user;
Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`Welcome, ${user.displayName || user.email}! Redirecting...`, false);
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Google Sign-in failed:", error);
Â  Â  Â  Â  Â  Â  Â  Â  let errorMessage = "Google sign-in failed.";

Â  Â  Â  Â  Â  Â  Â  Â  if (error.code === 'auth/popup-closed-by-user' || (error.message && error.message.includes('popup-closed-by-user'))) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = "Sign-in cancelled. Pop-up was closed.";
Â  Â  Â  Â  Â  Â  Â  Â  } else if (error.code === 'auth/account-exists-with-different-credential') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.pendingCredential = error.credential;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.conflictingEmail = error.customData.email;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = `âš ï¸ Account Conflict! An account for ${window.conflictingEmail} already exists, but was originally registered using **GitHub**. Please try signing in with GitHub.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Show inline error for social login conflicts
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (button.closest('#login-form')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showInlineError(errorMessage, 'login');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showInlineError(errorMessage, 'signup');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setLoading(button, false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  showMessage(errorMessage, true);
Â  Â  Â  Â  Â  Â  Â  Â  setLoading(button, false);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- UPDATED GITHUB AUTH LOGIC (Handles Google-first conflicts) ---
Â  Â  Â  Â  window.handleGitHubAuth = async function(button) {
Â  Â  Â  Â  Â  Â  if (!auth) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Authentication service failed to load.", true);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  clearInlineError();
Â  Â  Â  Â  Â  Â  setLoading(button, true);
Â  Â  Â  Â  Â  Â  window.pendingCredential = null;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Redirecting to GitHub for sign-in...", false);
Â  Â  Â  Â  Â  Â  Â  Â  const result = await signInWithPopup(auth, githubProvider);
Â  Â  Â  Â  Â  Â  Â  Â  const user = result.user;
Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`Welcome, ${user.displayName || user.email || user.uid}! Redirecting...`, false);
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("GitHub Sign-in failed:", error);
Â  Â  Â  Â  Â  Â  Â  Â  let errorMessage = "GitHub sign-in failed.";

Â  Â  Â  Â  Â  Â  Â  Â  if (error.code === 'auth/popup-closed-by-user' || (error.message && error.message.includes('popup-closed-by-user'))) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = "Sign-in cancelled. Pop-up was closed.";
Â  Â  Â  Â  Â  Â  Â  Â  } else if (error.code === 'auth/account-exists-with-different-credential') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.pendingCredential = error.credential;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.conflictingEmail = error.customData.email;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = `âš ï¸ Account Conflict! An account for ${window.conflictingEmail} already exists, but was originally registered using **Google** or **Email/Password**. Please try signing in with your original method.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Show inline error for social login conflicts
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (button.closest('#login-form')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showInlineError(errorMessage, 'login');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showInlineError(errorMessage, 'signup');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setLoading(button, false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  showMessage(errorMessage, true);
Â  Â  Â  Â  Â  Â  Â  Â  setLoading(button, false);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // 3. Password Visibility Toggle
Â  Â  Â  Â  window.togglePasswordVisibility = function(passwordInputId, button) {
Â  Â  Â  Â  Â  Â  const passwordInput = document.getElementById(passwordInputId);
Â  Â  Â  Â  Â  Â  const icon = button.querySelector('svg');

Â  Â  Â  Â  Â  Â  if (passwordInput.type === 'password') {
Â  Â  Â  Â  Â  Â  Â  Â  passwordInput.type = 'text';
Â  Â  Â  Â  Â  Â  Â  Â  // Change icon to 'eye-off' (representing visible)
Â  Â  Â  Â  Â  Â  Â  Â  icon.innerHTML = '<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c4.18 0 8.23 1.39 11.3 3.65-2.81 2.82-5.9 4.35-8.49 4.97"/><path d="M12 17c-4.18 0-8.23-1.39-11.3-3.65C.66 11.23 2.1 7.26 4.41 5.39"/><path d="M12 17a3 3 0 1 0-4.24-4.24"/>';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  passwordInput.type = 'password';
Â  Â  Â  Â  Â  Â  Â  Â  // Change icon back to 'eye' (representing hidden)
Â  Â  Â  Â  Â  Â  Â  Â  icon.innerHTML = '<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // 4. Forgot Password Link
Â  Â  Â  Â  window.handleForgotPassword = async function(event) {
Â  Â  Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  Â  Â  clearInlineError();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!auth) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Authentication service failed to load.", true);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const emailInput = document.getElementById('login-email');
Â  Â  Â  Â  Â  Â  const email = emailInput.value.trim();

Â  Â  Â  Â  Â  Â  if (!email) {
Â  Â  Â  Â  Â  Â  Â  Â  showInlineError("Please enter your email address above to reset your password.");
Â  Â  Â  Â  Â  Â  Â  Â  emailInput.focus();
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  showMessage("Attempting to send reset email...", false);

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await sendPasswordResetEmail(auth, email);
Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`Password reset link sent to ${email}! Check your inbox.`, false);
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Password reset failed:", error);
Â  Â  Â  Â  Â  Â  Â  Â  let errorMessage = "Failed to send reset email. Please check the email address.";
Â  Â  Â  Â  Â  Â  Â  Â  if (error.code === 'auth/user-not-found') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = `No account found for ${email}.`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  showInlineError(errorMessage);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- UI Toggling Logic ---

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Sets the initial state to the Log In form.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  function initializeForms() {
Â  Â  Â  Â  Â  Â  // Display only the Login form initially
Â  Â  Â  Â  Â  Â  loginForm.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  signupForm.classList.add('hidden');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Set Login tab as active (white, shadow, teal text)
Â  Â  Â  Â  Â  Â  loginTab.classList.add('bg-white', 'shadow', 'text-ammoue');
Â  Â  Â  Â  Â  Â  loginTab.classList.remove('text-gray-500');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Set Signup tab as inactive (gray text)
Â  Â  Â  Â  Â  Â  signupTab.classList.remove('bg-white', 'shadow', 'text-ammoue');
Â  Â  Â  Â  Â  Â  signupTab.classList.add('text-gray-500');
Â  Â  Â  Â  }

Â  Â  Â  Â  /**
Â  Â  Â  Â  Â * Function to toggle between login and sign-up forms, updating button styling.
Â  Â  Â  Â  Â * @param {string} formType - 'login' or 'signup'.
Â  Â  Â  Â  Â */
Â  Â  Â  Â  window.toggleForm = function(formType) {
Â  Â  Â  Â  Â  Â  clearInlineError(); // Clear errors when switching forms
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (formType === 'login') {
Â  Â  Â  Â  Â  Â  Â  Â  loginForm.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  signupForm.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Activate Login Tab
Â  Â  Â  Â  Â  Â  Â  Â  loginTab.classList.add('bg-white', 'shadow', 'text-ammoue');
Â  Â  Â  Â  Â  Â  Â  Â  loginTab.classList.remove('text-gray-500');

Â  Â  Â  Â  Â  Â  Â  Â  // Deactivate Signup Tab
Â  Â  Â  Â  Â  Â  Â  Â  signupTab.classList.remove('bg-white', 'shadow', 'text-ammoue');
Â  Â  Â  Â  Â  Â  Â  Â  signupTab.classList.add('text-gray-500');

Â  Â  Â  Â  Â  Â  } else if (formType === 'signup') {
Â  Â  Â  Â  Â  Â  Â  Â  loginForm.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  signupForm.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  // Activate Signup Tab
Â  Â  Â  Â  Â  Â  Â  Â  signupTab.classList.add('bg-white', 'shadow', 'text-ammoue');
Â  Â  Â  Â  Â  Â  Â  Â  signupTab.classList.remove('text-gray-500');

Â  Â  Â  Â  Â  Â  Â  Â  // Deactivate Login Tab
Â  Â  Â  Â  Â  Â  Â  Â  loginTab.classList.remove('bg-white', 'shadow', 'text-ammoue');
Â  Â  Â  Â  Â  Â  Â  Â  loginTab.classList.add('text-gray-500');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- Initialization ---
Â  Â  Â  Â  // 1. Set the initial form to Log In
Â  Â  Â  Â  initializeForms();

Â  Â  Â  Â  // 2. Initialize Firebase and check for existing auth state
Â  Â  Â  Â  initializeAppAndAuth();

Â  Â  </script>
</body>
</html>